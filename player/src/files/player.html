<!DOCTYPE html>
<html>

<head>
  <title>HLS Test Player | StreamForge</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script type="module" src="https://cdn.jsdelivr.net/npm/media-chrome@4/+esm"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/media-chrome@4/menu/+esm"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/hls-video-element@1.1/+esm"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/@mux/mux-video/+esm"></script>

  <style>
    body {
      margin: 0;
      padding: 10px 0;
      background: transparent;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: max-content;
      color: #fff;
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif;
      position: relative;
      overflow: hidden;
    }
    .video-container {
      width: 100%;
      max-height: 100%;
      aspect-ratio: 16 / 9;
      position: relative;
      max-width: 1200px;
    }

    media-controller {
      width: 100%;
      height: 100%;
      display: block;
      border-radius: 12px;
      overflow: hidden;
    }

    :root {
      --media-object-fit: contain;
      --media-primary-color: #9ca3af;
      --media-secondary-color: #9ca3af;
      --media-accent-color: #e5e7eb;
      --media-text-color: #e5e7eb;
      --media-control-background: rgba(17, 17, 20, 0.72);
      --media-control-hover-background: rgba(28, 28, 33, 0.9);
      --media-range-track-color: rgba(255,255,255,0.18);
      --media-range-bar-color: #e5e7eb;
      --media-range-thumb-background: #ffffff;
      --media-range-thumb-box-shadow: 0 1px 6px rgba(0,0,0,0.35);
      --media-border-radius: 10px;
    }

    media-control-bar {
      background: rgba(0,0,0,0.35);
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    @media (max-width: 768px) {
      .video-container {
        max-width: 100%;
      }
    }
  </style>
</head>

<body>
    <div class="video-container">
      <media-controller id="mc" keyboardforwardseekoffset="15" keyboardbackwardseekoffset="5">
        <hls-video id="video" slot="media" src="{{M3U8_URL}}" stream-type="on-demand" preload="metadata" playsinline
          crossorigin>
          <!-- <track default kind="metadata" label="thumbnails"
            src="https://image.mux.com/Sc89iWAyNkhJ3P1rQ02nrEdCFTnfT01CZ2KmaEcxXfB008/storyboard.vtt">
          <track default kind="chapters"
            src="https://media-chrome.mux.dev/examples/vanilla/vtt/elephantsdream/chapters.vtt"> -->
        </hls-video>

        <img slot="poster" srcset="
          https://placehold.co/640x360/000000/FFFFFF/png?text=Streamforge 640w,
          https://placehold.co/960x540/000000/FFFFFF/png?text=Streamforge 960w,
          https://placehold.co/1280x720/000000/FFFFFF/png?text=Streamforge 1280w,
          https://placehold.co/1920x1080/000000/FFFFFF/png?text=Streamforge 1920w
          " alt="StreamForge" decoding="async">

        <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>
        <media-error-dialog slot="dialog"></media-error-dialog>

        <!-- Settings menu -->
        <media-settings-menu anchor="auto" hidden>
          <media-settings-menu-item>
            Speed
            <media-playback-rate-menu slot="submenu" hidden>
              <div slot="title">Speed</div>
            </media-playback-rate-menu>
          </media-settings-menu-item>
          <media-settings-menu-item>
            Quality
            <media-rendition-menu slot="submenu" hidden>
              <div slot="title">Quality</div>
            </media-rendition-menu>
          </media-settings-menu-item>
          <media-settings-menu-item>
            Captions
            <media-captions-menu slot="submenu" hidden>
              <div slot="title">Captions</div>
            </media-captions-menu>
          </media-settings-menu-item>
          <media-settings-menu-item>
            Audio
            <media-audio-track-menu slot="submenu" hidden>
              <div slot="title">Audio</div>
            </media-audio-track-menu>
          </media-settings-menu-item>
        </media-settings-menu>

        <media-control-bar>
          <media-play-button></media-play-button>
          <media-seek-backward-button seekoffset="5"></media-seek-backward-button>
          <media-seek-forward-button seekoffset="15"></media-seek-forward-button>
          <media-mute-button></media-mute-button>
          <media-time-display></media-time-display>
          <media-time-range></media-time-range>
          <media-duration-display></media-duration-display>
          <media-settings-menu-button></media-settings-menu-button>
          <media-fullscreen-button></media-fullscreen-button>
        </media-control-bar>
      </media-controller>
    </div>
</body>

</html>